import type { LucideIcon } from 'lucide-react';
import {
  AlertCircle,
  AlertTriangle,
  ArrowLeft,
  ArrowRight,
  BookOpen,
  CalendarDays,
  Check,
  CheckCircle,
  CheckCircle2,
  ChefHat,
  ChevronDown,
  ChevronLeft,
  ChevronRight,
  ChevronUp,
  Circle,
  Clock,
  Code,
  Crop,
  Dot,
  Edit,
  Eye,
  Facebook,
  Filter,
  Folder,
  FolderX,
  Gavel,
  Github,
  Globe,
  GraduationCap,
  GripVertical,
  Handshake,
  Heart,
  HeartCrack,
  HelpCircle,
  Home,
  Image,
  Info,
  Instagram,
  KeyRound,
  Laugh,
  Lightbulb,
  Link as LinkIcon,
  Linkedin,
  ListVideo,
  Loader2,
  Lock,
  LogOut,
  Mail,
  MapPin,
  Menu,
  MessageSquare,
  MoreHorizontal,
  Music,
  PanelLeft,
  Play,
  Plus,
  RotateCcw,
  Save,
  Scale,
  Search,
  Send,
  Settings,
  Shield,
  ShieldCheck,
  Sparkles,
  Trash2,
  TrendingUp,
  Twitter,
  Upload,
  User,
  UserPlus,
  Users,
  Video,
  X,
  XCircle,
  Youtube,
} from 'lucide-react';

const iconRegistry = Object.freeze({
  AlertCircle,
  AlertTriangle,
  ArrowLeft,
  ArrowRight,
  BookOpen,
  CalendarDays,
  Check,
  CheckCircle,
  CheckCircle2,
  ChefHat,
  ChevronDown,
  ChevronLeft,
  ChevronRight,
  ChevronUp,
  Circle,
  Clock,
  Code,
  Crop,
  Dot,
  Edit,
  Eye,
  Facebook,
  Filter,
  Folder,
  FolderX,
  Gavel,
  Github,
  Globe,
  GraduationCap,
  GripVertical,
  Handshake,
  Heart,
  HeartCrack,
  HelpCircle,
  Home,
  Image,
  Info,
  Instagram,
  KeyRound,
  Laugh,
  Lightbulb,
  Link: LinkIcon,
  Linkedin,
  ListVideo,
  Loader2,
  Lock,
  LogOut,
  Mail,
  MapPin,
  Menu,
  MessageSquare,
  MoreHorizontal,
  Music,
  PanelLeft,
  Play,
  Plus,
  RotateCcw,
  Save,
  Scale,
  Search,
  Send,
  Settings,
  Shield,
  ShieldCheck,
  Sparkles,
  Trash2,
  TrendingUp,
  Twitter,
  Upload,
  User,
  UserPlus,
  Users,
  Video,
  X,
  XCircle,
  Youtube,
});

export type IconName = keyof typeof iconRegistry;

const iconCache = new Map<string, LucideIcon>();

export function getIcon(name: string, fallback: IconName = 'HelpCircle'): LucideIcon {
  const cached = iconCache.get(name);
  if (cached) {
    return cached;
  }

  const resolved = iconRegistry[name as IconName] ?? iconRegistry[fallback];
  const frozen = Object.freeze(resolved);
  iconCache.set(name, frozen);
  return frozen;
}

export function resetIconFactoryCache() {
  iconCache.clear();
}
